angular.module("angular.prime").directive("puiInput",function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=b[0].nodeName;$(function(){var g=!1,h=!1,i=!1,f=a.$eval(d.puiInput)||{};"INPUT"===e&&("password"===d.type&&(f.inline=void 0!==f.inline?f.inline:!1,b.puipassword({inline:f.inline,promptLabel:f.promptLabel||"Please enter a password",weakLabel:f.weakLabel||"Weak",goodLabel:f.goodLabel||"Medium",strongLabel:f.strongLabel||"Strong"}),i=!0),"checkbox"===d.type&&(b.puicheckbox(),
d.checked&&a.safeApply(function(){c.$setViewValue(true)}),g=!0),"radio"===d.type&&(b.puiradiobutton(),h=!0),!g&&(!h&&!i)&&b.puiinputtext());if("TEXTAREA"===e){var i=d.puiAutocomplete,k=a.$eval(d.puiAutocomplete);f.autoResize=void 0!==f.autoResize?f.autoResize:!1;b.puiinputtextarea({autoResize:f.autoResize,autoComplete:i,scrollHeight:f.scrollHeight||150,completeSource:k,minQueryLength:f.minQueryLength||3,queryDelay:f.queryDelay||700,counter:$(f.display),counterTemplate:f.template,maxlength:f.maxLength});
f.display&&a.$watch(c.$viewValue,function(){b.puiinputtextarea("updateCounter")})}if(g){var j={read:function(){$(function(){var d=b.puicheckbox("isChecked"),e=b.val();d||(e=null);a.safeApply(function(){c.$setViewValue(e)})})}};c.$render=function(){$(function(){c.$viewValue?b.puicheckbox("check",!0,!0):b.puicheckbox("uncheck",!0,!0)})};b.bind("puicheckboxchange",function(){j.read()})}h&&(j={read:function(){$(function(){var d=b.puiradiobutton("isChecked"),e=b.val();d&&a.safeApply(function(){c.$setViewValue(e)})})}},
c.$render=function(){$(function(){c.$viewValue==b.val()&&!b.puiradiobutton("isChecked")&&b.trigger("click")})},b.bind("puiradiobuttonchange",function(){j.read()}));d.ngDisabled&&a.$watch(d.ngDisabled,function(a){a===false?$(function(){g?b.puicheckbox("enable"):h?b.puiradiobutton("enable"):b.puiinputtext("enable")}):$(function(){g?b.puicheckbox("disable"):h?b.puiradiobutton("disable"):b.puiinputtext("disable")})})})}}}});$(function(){$.widget("primeui.puicheckbox",{_create:function(){this.element.wrap('<div class="pui-chkbox ui-widget"><div class="ui-helper-hidden-accessible"></div></div>');this.container=this.element.parent().parent();this.box=$('<div class="pui-chkbox-box ui-widget ui-corner-all ui-state-default">').appendTo(this.container);this.icon=$('<span class="pui-chkbox-icon pui-c"></span>').appendTo(this.box);this.disabled=this.element.prop("disabled");this.label=$('label[for="'+this.element.attr("id")+
'"]');this.element.prop("checked")&&(this.box.addClass("ui-state-active"),this.icon.addClass("ui-icon ui-icon-check"));this.disabled?this.box.addClass("ui-state-disabled"):this._bindEvents()},_bindEvents:function(){var a=this;this.box.on("mouseover.puicheckbox",function(){a.isChecked()||a.box.addClass("ui-state-hover")}).on("mouseout.puicheckbox",function(){a.box.removeClass("ui-state-hover")}).on("click.puicheckbox",function(){a.toggle()});this.element.focus(function(){a.isChecked()&&a.box.removeClass("ui-state-active");
a.box.addClass("ui-state-focus")}).blur(function(){a.isChecked()&&a.box.addClass("ui-state-active");a.box.removeClass("ui-state-focus")}).keydown(function(a){a.which==$.ui.keyCode.SPACE&&a.preventDefault()}).keyup(function(b){b.which==$.ui.keyCode.SPACE&&(a.toggle(!0),b.preventDefault())});this.label.on("click.puicheckbox",function(b){a.toggle();b.preventDefault()})},toggle:function(a){this.isChecked()?this.uncheck(a):this.check(a);this._trigger("change",null,this.isChecked())},isChecked:function(){return this.element.prop("checked")},
check:function(a,b){this.isChecked()||(this.element.prop("checked",!0),this.icon.addClass("ui-icon ui-icon-check"),a||this.box.addClass("ui-state-active"),b||this.element.trigger("change"))},uncheck:function(){this.isChecked()&&(this.element.prop("checked",!1),this.box.removeClass("ui-state-active"),this.icon.removeClass("ui-icon ui-icon-check"),this.element.trigger("change"))},_unbindEvents:function(){this.box.off();this.element.focus(function(){}).blur(function(){}).keydown(function(){}).keyup(function(){});
this.label.off()},disable:function(){var a=this.box;a.attr("aria-disabled",a.prop("disabled"));a.addClass("ui-state-disabled").removeClass("ui-state-hover");this._unbindEvents()},enable:function(){this.box.attr("aria-disabled",this.element.prop("disabled"));this.box.removeClass("ui-state-disabled");this._bindEvents()}})});$(function(){$.widget("primeui.puiinputtext",{_create:function(){var a=this.element,b=a.prop("disabled");a.addClass("pui-inputtext ui-widget ui-state-default ui-corner-all");b?a.addClass("ui-state-disabled"):this._enableMouseEffects(a);a.attr("role","textbox").attr("aria-disabled",b).attr("aria-readonly",a.prop("readonly")).attr("aria-multiline",a.is("textarea"))},_destroy:function(){},_enableMouseEffects:function(){var a=this.element;a.hover(function(){a.toggleClass("ui-state-hover")}).focus(function(){a.addClass("ui-state-focus")}).blur(function(){a.removeClass("ui-state-focus")})},
_disableMouseEffects:function(){this.element.hover(function(){}).focus(function(){}).blur(function(){})},disable:function(){var a=this.element;a.attr("aria-disabled",a.prop("disabled"));a.addClass("ui-state-disabled");a.removeClass("ui-state-focus");a.removeClass("ui-state-hover");this._disableMouseEffects()},enable:function(){this.element.attr("aria-disabled",this.element.prop("disabled"));this.element.removeClass("ui-state-disabled");this._enableMouseEffects()}})});$(function(){$.widget("primeui.puiinputtextarea",{options:{autoResize:!1,autoComplete:!1,maxlength:null,counter:null,counterTemplate:"{0}",minQueryLength:3,queryDelay:700},_create:function(){var a=this;this.element.puiinputtext();this.options.autoResize&&(this.options.rowsDefault=this.element.attr("rows"),this.options.colsDefault=this.element.attr("cols"),this.element.addClass("pui-inputtextarea-resizable"),this.element.keyup(function(){a._resize()}).focus(function(){a._resize()}).blur(function(){a._resize()}));
this.options.maxlength&&this.element.keyup(function(){var b=a.element.val();b.length>a.options.maxlength&&a.element.val(b.substr(0,a.options.maxlength));a.options.counter&&a.updateCounter()});this.options.counter&&this.updateCounter();this.options.autoComplete&&this._initAutoComplete()},updateCounter:function(){var a=this.element.val().length;this.options.counter&&(a=this.options.counterTemplate.replace("{0}",this.options.maxlength-a),this.options.counter.text(a))},_resize:function(){for(var a=0,
b=this.element.val().split("\n"),d=b.length-1;0<=d;--d)a+=Math.floor(b[d].length/this.options.colsDefault+1);this.element.attr("rows",a>=this.options.rowsDefault?a+1:this.options.rowsDefault)},_initAutoComplete:function(){var a=this;this.panel=$('<div id="'+this.id+'_panel" class="pui-autocomplete-panel ui-widget-content ui-corner-all ui-helper-hidden ui-shadow"></div>').appendTo(document.body);this.element.keyup(function(b){var c=$.ui.keyCode;switch(b.which){case c.UP:case c.LEFT:case c.DOWN:case c.RIGHT:case c.ENTER:case c.NUMPAD_ENTER:case c.TAB:case c.SPACE:case c.CONTROL:case c.ALT:case c.ESCAPE:case 224:break;
default:var e=a._extractQuery();e&&e.length>=a.options.minQueryLength&&(a.timeout&&a._clearTimeout(a.timeout),a.timeout=setTimeout(function(){a.search(e)},a.options.queryDelay))}}).keydown(function(b){var c=a.panel.is(":visible"),e=$.ui.keyCode;switch(b.which){case e.UP:case e.LEFT:c?(c=a.items.filter(".ui-state-highlight"),e=0==c.length?a.items.eq(0):c.prev(),1==e.length&&(c.removeClass("ui-state-highlight"),e.addClass("ui-state-highlight"),a.options.scrollHeight&&PUI.scrollInView(a.panel,e)),b.preventDefault()):
a._clearTimeout();break;case e.DOWN:case e.RIGHT:c?(c=a.items.filter(".ui-state-highlight"),e=0==c.length?_self.items.eq(0):c.next(),1==e.length&&(c.removeClass("ui-state-highlight"),e.addClass("ui-state-highlight"),a.options.scrollHeight&&PUI.scrollInView(a.panel,e)),b.preventDefault()):a._clearTimeout();break;case e.ENTER:case e.NUMPAD_ENTER:c?(a.items.filter(".ui-state-highlight").trigger("click"),b.preventDefault()):a._clearTimeout();break;case e.SPACE:case e.CONTROL:case e.ALT:case e.BACKSPACE:case e.ESCAPE:case 224:a._clearTimeout();
c&&a._hide();break;case e.TAB:a._clearTimeout(),c&&(a.items.filter(".ui-state-highlight").trigger("click"),a._hide())}});$(document.body).bind("mousedown.puiinputtextarea",function(b){if(!a.panel.is(":hidden")){var c=a.panel.offset();b.target!==a.element.get(0)&&(b.pageX<c.left||b.pageX>c.left+a.panel.width()||b.pageY<c.top||b.pageY>c.top+a.panel.height())&&a._hide()}});var b="resize."+this.id;$(window).unbind(b).bind(b,function(){a.panel.is(":visible")&&a._hide()})},_bindDynamicEvents:function(){var a=
this;this.items.bind("mouseover",function(){var b=$(this);b.hasClass("ui-state-highlight")||(a.items.filter(".ui-state-highlight").removeClass("ui-state-highlight"),b.addClass("ui-state-highlight"))}).bind("click",function(b){var d=$(this),c=d.attr("data-item-value").substring(a.query.length);a.element.focus();a.element.insertText(c,a.element.getSelection().start,!0);a._hide();a._trigger("itemselect",b,d)})},_clearTimeout:function(){this.timeout&&clearTimeout(this.timeout);this.timeout=null},_extractQuery:function(){var a=
this.element.getSelection().end;return(a=/\S+$/.exec(this.element.get(0).value.slice(0,a)))?a[0]:null},search:function(a){this.query=a;a={query:a};this.options.completeSource&&this.options.completeSource.call(this,a,this._handleResponse)},_handleResponse:function(a){this.panel.html("");for(var b=$('<ul class="pui-autocomplete-items pui-autocomplete-list ui-widget-content ui-widget ui-corner-all ui-helper-reset"></ul>'),d=0;d<a.length;d++){var c=$('<li class="pui-autocomplete-item pui-autocomplete-list-item ui-corner-all"></li>');
c.attr("data-item-value",a[d].value);c.text(a[d].label);b.append(c)}this.panel.append(b).show();this.items=this.panel.find(".pui-autocomplete-item");this._bindDynamicEvents();0<this.items.length?(this.items.eq(0).addClass("ui-state-highlight"),this.options.scrollHeight&&this.panel.height()>this.options.scrollHeight&&this.panel.height(this.options.scrollHeight),this.panel.is(":hidden")?this._show():this._alignPanel()):this.panel.hide()},_alignPanel:function(){var a=this.element.getCaretPosition(),
b=this.element.offset();this.panel.css({left:b.left+a.left,top:b.top+a.top,width:this.element.innerWidth()})},_show:function(){this._alignPanel();this.panel.show()},_hide:function(){this.panel.hide()},_refresh:function(){},_destroy:function(){}})});$(function(){$.widget("primeui.puipassword",{options:{promptLabel:"Please enter a password",weakLabel:"Weak",goodLabel:"Medium",strongLabel:"Strong",inline:!1},_create:function(){this.element.puiinputtext().addClass("pui-password");if(!this.element.prop(":disabled")){var a;a='<div class="pui-password-panel ui-widget ui-state-highlight ui-corner-all ui-helper-hidden"><div class="pui-password-meter" style="background-position:0pt 0pt">&nbsp;</div>'+('<div class="pui-password-info">'+this.options.promptLabel+
"</div>");this.panel=$(a+"</div>").insertAfter(this.element);this.meter=this.panel.children("div.pui-password-meter");this.infoText=this.panel.children("div.pui-password-info");this.options.inline?this.panel.addClass("pui-password-panel-inline"):this.panel.addClass("pui-password-panel-overlay").appendTo("body");this._bindEvents()}},_destroy:function(){this.panel.remove()},_bindEvents:function(){var a=this;this.element.on("focus.puipassword",function(){a.show()}).on("blur.puipassword",function(){a.hide()}).on("keyup.puipassword",
function(){var b=null,c=null;if(0==a.element.val().length)b=a.options.promptLabel,c="0px 0px";else{var e=a._testStrength(a.element.val());30>e?(b=a.options.weakLabel,c="0px -10px"):30<=e&&80>e?(b=a.options.goodLabel,c="0px -20px"):80<=e&&(b=a.options.strongLabel,c="0px -30px")}a.meter.css("background-position",c);a.infoText.text(b)});if(!this.options.inline){var b="resize."+this.element.attr("id");$(window).unbind(b).bind(b,function(){a.panel.is(":visible")&&a.align()})}},_testStrength:function(a){var b=
0,d=0,d=a.match("[0-9]"),b=b+25*this._normalize(d?d.length:0.25,1),d=a.match("[a-zA-Z]"),b=b+10*this._normalize(d?d.length:0.5,3),d=a.match("[!@#$%^&*?_~.,;=]"),b=b+35*this._normalize(d?d.length:1/6,1),d=a.match("[A-Z]"),b=b+30*this._normalize(d?d.length:1/6,1),b=b*(a.length/8);return 100<b?100:b},_normalize:function(a,b){return 0>=a-b?a/b:1+0.5*(a/(a+b/4))},align:function(){this.panel.css({left:"",top:"","z-index":++PUI.zindex}).position({my:"left top",at:"right top",of:this.element})},show:function(){this.options.inline?
this.panel.slideDown():(this.align(),this.panel.fadeIn())},hide:function(){this.options.inline?this.panel.slideUp():this.panel.fadeOut()}})});$(function(){var a={};$.widget("primeui.puiradiobutton",{_create:function(){this.element.wrap('<div class="pui-radiobutton ui-widget"><div class="ui-helper-hidden-accessible"></div></div>');this.container=this.element.parent().parent();this.box=$('<div class="pui-radiobutton-box ui-widget pui-radiobutton-relative ui-state-default">').appendTo(this.container);this.icon=$('<span class="pui-radiobutton-icon pui-c"></span>').appendTo(this.box);this.disabled=this.element.prop("disabled");this.label=$('label[for="'+
this.element.attr("id")+'"]');this.element.prop("checked")&&(this.box.addClass("ui-state-active"),this.icon.addClass("ui-icon ui-icon-bullet"),a[this.element.attr("name")]=this.box);this.disabled?this.box.addClass("ui-state-disabled"):this._bindEvents()},_bindEvents:function(){var b=this;this.box.on("mouseover.puiradiobutton",function(){b.isChecked()||b.box.addClass("ui-state-hover")}).on("mouseout.puiradiobutton",function(){b.isChecked()||b.box.removeClass("ui-state-hover")}).on("click.puiradiobutton",
function(){b.isChecked()||(b.element.trigger("click"),$.browser.msie&&9>parseInt($.browser.version)&&b.element.trigger("change"))});if(0<this.label.length)this.label.on("click.puiradiobutton",function(a){b.element.trigger("click");a.preventDefault()});this.element.focus(function(){b.isChecked()&&b.box.removeClass("ui-state-active");b.box.addClass("ui-state-focus")}).blur(function(){b.isChecked()&&b.box.addClass("ui-state-active");b.box.removeClass("ui-state-focus")}).change(function(){var d=b.element.attr("name");
a[d]&&a[d].removeClass("ui-state-active ui-state-focus ui-state-hover").children(".pui-radiobutton-icon").removeClass("ui-icon ui-icon-bullet");b.icon.addClass("ui-icon ui-icon-bullet");b.element.is(":focus")||b.box.addClass("ui-state-active");a[d]=b.box;b._trigger("change",null)})},isChecked:function(){return this.element.prop("checked")},_unbindEvents:function(){this.box.off();0<this.label.length&&this.label.off()},enable:function(){this._bindEvents();this.box.removeClass("ui-state-disabled")},
disable:function(){this._unbindEvents();this.box.addClass("ui-state-disabled")}})});