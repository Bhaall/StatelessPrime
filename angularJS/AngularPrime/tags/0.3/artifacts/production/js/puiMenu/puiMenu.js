angular.module("angular.prime").directive("puiMenu",function(){return{restrict:"A",compile:function(){return function(a,b,d){var c=a.$eval(d.puiMenu)||{};c.popup=!1;c.trigger&&(a=$(c.trigger),void 0!=a?(c.popup=!0,c.trigger=a):c.trigger=null);if(c.isContextMenu&&c.isSlideMenu)throw Error("ContextMenu can't be combined with the SlideMenu");$(function(){var a=b.find("ul").length>0,d=b.find("h3").length>0;if(a||!d){d&&console.log("Warning : Menu with submenu and h3 elements found");c.isContextMenu?b.puicontextmenu({popup:c.popup,
trigger:c.trigger}):c.isSlideMenu?b.puislidemenu({popup:c.popup,trigger:c.trigger}):b.puitieredmenu({popup:c.popup,trigger:c.trigger,autoDisplay:c.autoDisplay})}else b.puimenu({popup:c.popup,trigger:c.trigger})})}}}});$(function(){$.widget("primeui.puimenu",$.primeui.puibasemenu,{options:{},_create:function(){this.element.addClass("pui-menu-list ui-helper-reset").wrap('<div class="pui-menu ui-widget ui-widget-content ui-corner-all ui-helper-clearfix" />');this.element.children("li").each(function(){var a=$(this);if(0<a.children("h3").length)a.addClass("ui-widget-header ui-corner-all");else{a.addClass("pui-menuitem ui-widget ui-corner-all");var a=a.children("a"),b=a.data("icon");a.addClass("pui-menuitem-link ui-corner-all").contents().wrap('<span class="ui-menuitem-text" />');
b&&a.prepend('<span class="pui-menuitem-icon ui-icon '+b+'"></span>')}});this.menuitemLinks=this.element.find(".pui-menuitem-link:not(.ui-state-disabled)");this._bindEvents();this._super()},_bindEvents:function(){var a=this;this.menuitemLinks.on("mouseenter.pui-menu",function(){$(this).addClass("ui-state-hover")}).on("mouseleave.pui-menu",function(){$(this).removeClass("ui-state-hover")});if(this.options.popup)this.menuitemLinks.on("click.pui-menu",function(){a.hide()})}})});
$(function(){$.widget("primeui.puitieredmenu",$.primeui.puibasemenu,{options:{autoDisplay:!0},_create:function(){this._render();this.links=this.element.find(".pui-menuitem-link:not(.ui-state-disabled)");this._bindEvents();this._super()},_render:function(){this.element.addClass("pui-menu-list ui-helper-reset").wrap('<div class="pui-tieredmenu pui-menu ui-widget ui-widget-content ui-corner-all ui-helper-clearfix" />');this.element.parent().uniqueId();this.options.id=this.element.parent().attr("id");
this.element.find("li").each(function(){var a=$(this),b=a.children("a"),d=b.data("icon");b.addClass("pui-menuitem-link ui-corner-all").contents().wrap('<span class="ui-menuitem-text" />');d&&b.prepend('<span class="pui-menuitem-icon ui-icon '+d+'"></span>');a.addClass("pui-menuitem ui-widget ui-corner-all");0<a.children("ul").length&&(a.addClass("pui-menu-parent"),a.children("ul").addClass("ui-widget-content pui-menu-list ui-corner-all ui-helper-clearfix pui-menu-child pui-shadow"),b.prepend('<span class="ui-icon ui-icon-triangle-1-e"></span>'))})},
_bindEvents:function(){this._bindItemEvents();this._bindDocumentHandler()},_bindItemEvents:function(){var a=this;this.links.on("mouseenter.pui-menu",function(){var b=$(this).parent(),d=a.options.autoDisplay,c=b.siblings(".pui-menuitem-active");1===c.length&&a._deactivate(c);d||a.active?b.hasClass("pui-menuitem-active")?a._reactivate(b):a._activate(b):a._highlight(b)});!1===this.options.autoDisplay&&(this.rootLinks=this.element.find("> .pui-menuitem > .pui-menuitem-link"),this.rootLinks.data("primeui-tieredmenu-rootlink",
this.options.id).find("*").data("primeui-tieredmenu-rootlink",this.options.id),this.rootLinks.on("click.pui-menu",function(){var b=$(this).parent(),d=b.children("ul.pui-menu-child");1===d.length&&(d.is(":visible")?(a.active=!1,a._deactivate(b)):(a.active=!0,a._highlight(b),a._showSubmenu(b,d)))}));this.element.parent().find("ul.pui-menu-list").on("mouseleave.pui-menu",function(b){a.activeitem&&a._deactivate(a.activeitem);b.stopPropagation()})},_bindDocumentHandler:function(){var a=this;$(document.body).on("click.pui-menu",
function(b){$(b.target).data("primeui-tieredmenu-rootlink")!==a.options.id&&(a.active=!1,a.element.find("li.pui-menuitem-active").each(function(){a._deactivate($(this),!0)}))})},_deactivate:function(a,b){this.activeitem=null;a.children("a.pui-menuitem-link").removeClass("ui-state-hover");a.removeClass("pui-menuitem-active");b?a.children("ul.pui-menu-child:visible").fadeOut("fast"):a.children("ul.pui-menu-child:visible").hide()},_activate:function(a){this._highlight(a);var b=a.children("ul.pui-menu-child");
1===b.length&&this._showSubmenu(a,b)},_reactivate:function(a){this.activeitem=a;a=a.children("ul.pui-menu-child").children("li.pui-menuitem-active:first");1===a.length&&this._deactivate(a)},_highlight:function(a){this.activeitem=a;a.children("a.pui-menuitem-link").addClass("ui-state-hover");a.addClass("pui-menuitem-active")},_showSubmenu:function(a,b){b.css({left:a.outerWidth(),top:0,"z-index":++PUI.zindex});b.show()}})});
$(function(){$.widget("primeui.puicontextmenu",$.primeui.puitieredmenu,{options:{autoDisplay:!0,target:null,event:"contextmenu"},_create:function(){this._super();this.element.parent().removeClass("pui-tieredmenu").addClass("pui-contextmenu pui-menu-dynamic pui-shadow");var a=this;this.options.target=this.options.target||$(document);this.element.parent().parent().is(document.body)||this.element.parent().appendTo("body");this.options.target.on(this.options.event+".pui-contextmenu",function(b){a.show(b)})},
_bindItemEvents:function(){this._super();var a=this;this.links.bind("click",function(){a.hide()})},_bindDocumentHandler:function(){var a=this;$(document.body).bind("click.pui-contextmenu",function(){a.element.parent().is(":hidden")||a.hide()})},show:function(a){$(document.body).children(".pui-contextmenu:visible").hide();var b=$(window),d=a.pageX,c=a.pageY,e=this.element.parent().outerWidth(),f=this.element.parent().outerHeight();d+e>b.width()+b.scrollLeft()&&(d-=e);c+f>b.height()+b.scrollTop()&&
(c-=f);this.options.beforeShow&&this.options.beforeShow.call(this);this.element.parent().css({left:d,top:c,"z-index":++PUI.zindex}).show();a.preventDefault();a.stopPropagation()},hide:function(){var a=this;this.element.parent().find("li.pui-menuitem-active").each(function(){a._deactivate($(this),!0)});this.element.parent().fadeOut("fast")},isVisible:function(){return this.element.parent().is(":visible")},getTarget:function(){return this.jqTarget}})});
$(function(){$.widget("primeui.puislidemenu",$.primeui.puibasemenu,{_create:function(){this._render();this.rootList=this.element;this.content=this.element.parent();this.wrapper=this.content.parent();this.container=this.wrapper.parent();this.submenus=this.container.find("ul.pui-menu-list");this.links=this.element.find("a.pui-menuitem-link:not(.ui-state-disabled)");this.backward=this.wrapper.children("div.pui-slidemenu-backward");this.stack=[];this.jqWidth=this.container.width();this.element.hasClass("pui-menu-dynamic")||
this._applyDimensions();this._super();this._bindEvents()},_render:function(){this.element.addClass("pui-menu-list ui-helper-reset").wrap('<div class="pui-menu pui-slidemenu ui-widget ui-widget-content ui-corner-all ui-helper-clearfix"/>').wrap('<div class="pui-slidemenu-wrapper" />').after('<div class="pui-slidemenu-backward ui-widget-header ui-corner-all ui-helper-clearfix">\n                    <span class="ui-icon ui-icon-triangle-1-w"></span>Back</div>').wrap('<div class="pui-slidemenu-content" />');
this.element.parent().uniqueId();this.options.id=this.element.parent().attr("id");this.element.find("li").each(function(){var a=$(this),b=a.children("a"),d=b.data("icon");b.addClass("pui-menuitem-link ui-corner-all").contents().wrap('<span class="ui-menuitem-text" />');d&&b.prepend('<span class="pui-menuitem-icon ui-icon '+d+'"></span>');a.addClass("pui-menuitem ui-widget ui-corner-all");0<a.children("ul").length&&(a.addClass("pui-menu-parent"),a.children("ul").addClass("ui-widget-content pui-menu-list ui-corner-all ui-helper-clearfix pui-menu-child ui-shadow"),
b.prepend('<span class="ui-icon ui-icon-triangle-1-e"></span>'))})},_bindEvents:function(){var a=this;this.links.on("mouseenter.pui-menu",function(){$(this).addClass("ui-state-hover")}).on("mouseleave.pui-menu",function(){$(this).removeClass("ui-state-hover")}).on("click.pui-menu",function(){var b=$(this).next();1==b.length&&a._forward(b)});this.backward.on("click.pui-menu",function(){a._back()})},_forward:function(a){var b=this;this._push(a);var d=-1*this._depth()*this.jqWidth;a.show().css({left:this.jqWidth});
this.rootList.animate({left:d},500,"easeInOutCirc",function(){b.backward.is(":hidden")&&b.backward.fadeIn("fast")})},_back:function(){var a=this,b=this._pop(),d=this._depth();this.rootList.animate({left:-1*d*this.jqWidth},500,"easeInOutCirc",function(){b.hide();0==d&&a.backward.fadeOut("fast")})},_push:function(a){this.stack.push(a)},_pop:function(){return this.stack.pop()},_last:function(){return this.stack[this.stack.length-1]},_depth:function(){return this.stack.length},_applyDimensions:function(){this.submenus.width(this.container.width());
this.wrapper.height(this.rootList.outerHeight(!0)+this.backward.outerHeight(!0));this.content.height(this.rootList.outerHeight(!0));this.rendered=!0},show:function(){this.align();this.container.css("z-index",++PUI.zindex).show();this.rendered||this._applyDimensions()}})});