$(function(){$.widget("primeui.puiaccordion",{options:{activeIndex:0,multiple:!1},_create:function(){this.options.multiple&&(this.options.activeIndex=[]);var b=this;this.element.addClass("pui-accordion ui-widget ui-helper-reset");this.element.children("h3").addClass("pui-accordion-header ui-helper-reset ui-state-default").each(function(a){var c=$(this),e=c.html(),d=a==b.options.activeIndex?"ui-icon ui-icon-triangle-1-s":"ui-icon ui-icon-triangle-1-e";c.addClass(a==b.options.activeIndex?"ui-state-active ui-corner-top":
"ui-corner-all").html('<span class="'+d+'"></span><a href="#">'+e+"</a>")});this.element.children("div").each(function(a){var c=$(this);c.addClass("pui-accordion-content ui-helper-reset ui-widget-content");a!=b.options.activeIndex&&c.addClass("ui-helper-hidden")});this.headers=this.element.children(".pui-accordion-header");this.panels=this.element.children(".pui-accordion-content");this.headers.children("a").disableSelection();this._bindEvents()},_bindEvents:function(){var b=this;this.headers.mouseover(function(){var a=
$(this);!a.hasClass("ui-state-active")&&!a.hasClass("ui-state-disabled")&&a.addClass("ui-state-hover")}).mouseout(function(){var a=$(this);!a.hasClass("ui-state-active")&&!a.hasClass("ui-state-disabled")&&a.removeClass("ui-state-hover")}).click(function(a){var c=$(this);if(!c.hasClass("ui-state-disabled")){var e=c.index()/2;c.hasClass("ui-state-active")?b.unselect(e):b.select(e)}a.preventDefault()})},select:function(b){var a=this.panels.eq(b);this.options.multiple?this._addToSelection(b):this.options.activeIndex=
b;this._trigger("change",null,{index:b});this._show(a)},unselect:function(b){var a=this.panels.eq(b),c=a.prev();c.attr("aria-expanded",!1).children(".ui-icon").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");c.removeClass("ui-state-active ui-corner-top").addClass("ui-corner-all");a.attr("aria-hidden",!0).slideUp();this._removeFromSelection(b)},_show:function(b){if(!this.options.multiple){var a=this.headers.filter(".ui-state-active");a.children(".ui-icon").removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");
a.attr("aria-expanded",!1).removeClass("ui-state-active ui-corner-top").addClass("ui-corner-all").next().attr("aria-hidden",!0).slideUp()}b.prev().attr("aria-expanded",!0).addClass("ui-state-active ui-corner-top").removeClass("ui-state-hover ui-corner-all").children(".ui-icon").removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");b.attr("aria-hidden",!1).slideDown("normal")},_addToSelection:function(b){this.options.activeIndex.push(b)},_removeFromSelection:function(b){this.options.activeIndex=
$.grep(this.options.activeIndex,function(a){return a!=b})},getActiveIndex:function(){return this.options.activeIndex}})});angular.module("angular.prime").directive("puiAccordion",function(){return{restrict:"A",compile:function(){return function(b,a,c){function e(d){d=void 0!==d?d:a.puiaccordion("getActiveIndex");b[c.puiAccordion].activeIndex=d}var d=b.$eval(c.puiAccordion)||{};d.activeIndex=d.activeIndex||0;$(function(){a.puiaccordion({multiple:d.multiple,activeIndex:d.activeIndex})});var f=c.puiAccordion&&"{"!==c.puiAccordion.trim().charAt(0);(f||d.callback)&&a.bind("puiaccordionchange",function(a,c){var g=c.index;
f&&b.safeApply(e(g));d.callback&&d.callback(g)});f&&(e(void 0),b.$watch(c.puiAccordion+".activeIndex",function(b){var c=a.puiaccordion("getActiveIndex");b!==c&&a.puiaccordion("select",b)}))}}}});